{"ast":null,"code":"import { createAnatomy } from '@zag-js/anatomy';\nimport { Selection, ListCollection, GridCollection, isGridCollection } from '@zag-js/collection';\nimport { raf, observeAttributes, getByTypeahead, scrollIntoView, dataAttr, contains, getEventTarget, getEventKey, isEditableElement, ariaAttr, isCtrlOrMetaKey, isComposingEvent, getNativeEvent } from '@zag-js/dom-query';\nimport { isEqual, createSplitProps, ensure } from '@zag-js/utils';\nimport { setup } from '@zag-js/core';\nimport { trackFocusVisible, getInteractionModality } from '@zag-js/focus-visible';\nimport { createProps } from '@zag-js/types';\n\n// src/listbox.anatomy.ts\nvar anatomy = createAnatomy(\"listbox\").parts(\"label\", \"input\", \"item\", \"itemText\", \"itemIndicator\", \"itemGroup\", \"itemGroupLabel\", \"content\", \"root\", \"valueText\");\nvar parts = anatomy.build();\nvar collection = options => {\n  return new ListCollection(options);\n};\ncollection.empty = () => {\n  return new ListCollection({\n    items: []\n  });\n};\nvar gridCollection = options => {\n  return new GridCollection(options);\n};\ngridCollection.empty = () => {\n  return new GridCollection({\n    items: [],\n    columnCount: 0\n  });\n};\n\n// src/listbox.dom.ts\nvar getRootId = ctx => ctx.ids?.root ?? `select:${ctx.id}`;\nvar getContentId = ctx => ctx.ids?.content ?? `select:${ctx.id}:content`;\nvar getLabelId = ctx => ctx.ids?.label ?? `select:${ctx.id}:label`;\nvar getItemId = (ctx, id) => ctx.ids?.item?.(id) ?? `select:${ctx.id}:option:${id}`;\nvar getItemGroupId = (ctx, id) => ctx.ids?.itemGroup?.(id) ?? `select:${ctx.id}:optgroup:${id}`;\nvar getItemGroupLabelId = (ctx, id) => ctx.ids?.itemGroupLabel?.(id) ?? `select:${ctx.id}:optgroup-label:${id}`;\nvar getContentEl = ctx => ctx.getById(getContentId(ctx));\nvar getItemEl = (ctx, id) => ctx.getById(getItemId(ctx, id));\n\n// src/listbox.connect.ts\nfunction connect(service, normalize) {\n  const {\n    context,\n    prop,\n    scope,\n    computed,\n    send,\n    refs\n  } = service;\n  const disabled = prop(\"disabled\");\n  const collection2 = prop(\"collection\");\n  const layout = isGridCollection(collection2) ? \"grid\" : \"list\";\n  const focused = context.get(\"focused\");\n  const focusVisible = refs.get(\"focusVisible\") && focused;\n  const value = context.get(\"value\");\n  const selectedItems = context.get(\"selectedItems\");\n  const highlightedValue = context.get(\"highlightedValue\");\n  const highlightedItem = context.get(\"highlightedItem\");\n  const isTypingAhead = computed(\"isTypingAhead\");\n  const interactive = computed(\"isInteractive\");\n  const ariaActiveDescendant = highlightedValue ? getItemId(scope, highlightedValue) : void 0;\n  function getItemState(props2) {\n    const itemDisabled = collection2.getItemDisabled(props2.item);\n    const value2 = collection2.getItemValue(props2.item);\n    ensure(value2, () => `[zag-js] No value found for item ${JSON.stringify(props2.item)}`);\n    const highlighted = highlightedValue === value2;\n    return {\n      value: value2,\n      disabled: Boolean(disabled || itemDisabled),\n      focused: highlighted && focused,\n      focusVisible: highlighted && focusVisible,\n      // deprecated\n      highlighted: highlighted && focusVisible,\n      selected: context.get(\"value\").includes(value2)\n    };\n  }\n  return {\n    empty: value.length === 0,\n    highlightedItem,\n    highlightedValue,\n    clearHighlightedValue() {\n      send({\n        type: \"HIGHLIGHTED_VALUE.SET\",\n        value: null\n      });\n    },\n    selectedItems,\n    hasSelectedItems: computed(\"hasSelectedItems\"),\n    value,\n    valueAsString: computed(\"valueAsString\"),\n    collection: collection2,\n    disabled: !!disabled,\n    selectValue(value2) {\n      send({\n        type: \"ITEM.SELECT\",\n        value: value2\n      });\n    },\n    setValue(value2) {\n      send({\n        type: \"VALUE.SET\",\n        value: value2\n      });\n    },\n    selectAll() {\n      if (!computed(\"multiple\")) {\n        throw new Error(\"[zag-js] Cannot select all items in a single-select listbox\");\n      }\n      send({\n        type: \"VALUE.SET\",\n        value: collection2.getValues()\n      });\n    },\n    highlightValue(value2) {\n      send({\n        type: \"HIGHLIGHTED_VALUE.SET\",\n        value: value2\n      });\n    },\n    clearValue(value2) {\n      if (value2) {\n        send({\n          type: \"ITEM.CLEAR\",\n          value: value2\n        });\n      } else {\n        send({\n          type: \"VALUE.CLEAR\"\n        });\n      }\n    },\n    getItemState,\n    getRootProps() {\n      return normalize.element({\n        ...parts.root.attrs,\n        dir: prop(\"dir\"),\n        id: getRootId(scope),\n        \"data-orientation\": prop(\"orientation\"),\n        \"data-disabled\": dataAttr(disabled)\n      });\n    },\n    getInputProps(props2 = {}) {\n      return normalize.input({\n        ...parts.input.attrs,\n        dir: prop(\"dir\"),\n        disabled,\n        \"data-disabled\": dataAttr(disabled),\n        autoComplete: \"off\",\n        autoCorrect: \"off\",\n        \"aria-haspopup\": \"listbox\",\n        \"aria-controls\": getContentId(scope),\n        \"aria-autocomplete\": \"list\",\n        \"aria-activedescendant\": ariaActiveDescendant,\n        spellCheck: false,\n        enterKeyHint: \"go\",\n        onFocus() {\n          queueMicrotask(() => {\n            send({\n              type: \"INPUT.FOCUS\"\n            });\n          });\n        },\n        onBlur() {\n          send({\n            type: \"CONTENT.BLUR\",\n            src: \"input\"\n          });\n        },\n        onInput(event) {\n          if (!props2.autoHighlight) return;\n          const node = event.currentTarget;\n          queueMicrotask(() => {\n            if (!node.isConnected) return;\n            send({\n              type: \"HIGHLIGHTED_VALUE.SET\",\n              value: node.value ? prop(\"collection\").firstValue : null\n            });\n          });\n        },\n        onKeyDown(event) {\n          if (event.defaultPrevented) return;\n          if (isComposingEvent(event)) return;\n          const nativeEvent = getNativeEvent(event);\n          const forwardEvent = () => {\n            event.preventDefault();\n            const win = scope.getWin();\n            const keyboardEvent = new win.KeyboardEvent(nativeEvent.type, nativeEvent);\n            getContentEl(scope)?.dispatchEvent(keyboardEvent);\n          };\n          switch (nativeEvent.key) {\n            case \"ArrowLeft\":\n            case \"ArrowRight\":\n              {\n                if (!isGridCollection(collection2)) return;\n                if (event.ctrlKey) return;\n                forwardEvent();\n              }\n            case \"Home\":\n            case \"End\":\n              {\n                if (highlightedValue == null && event.shiftKey) return;\n                forwardEvent();\n              }\n            case \"ArrowDown\":\n            case \"ArrowUp\":\n              {\n                forwardEvent();\n                break;\n              }\n            case \"Enter\":\n              event.preventDefault();\n              send({\n                type: \"ITEM.CLICK\",\n                value: highlightedValue\n              });\n              break;\n          }\n        }\n      });\n    },\n    getLabelProps() {\n      return normalize.element({\n        dir: prop(\"dir\"),\n        id: getLabelId(scope),\n        ...parts.label.attrs,\n        \"data-disabled\": dataAttr(disabled)\n      });\n    },\n    getValueTextProps() {\n      return normalize.element({\n        ...parts.valueText.attrs,\n        dir: prop(\"dir\"),\n        \"data-disabled\": dataAttr(disabled)\n      });\n    },\n    getItemProps(props2) {\n      const itemState = getItemState(props2);\n      return normalize.element({\n        id: getItemId(scope, itemState.value),\n        role: \"option\",\n        ...parts.item.attrs,\n        dir: prop(\"dir\"),\n        \"data-value\": itemState.value,\n        \"aria-selected\": itemState.selected,\n        \"data-selected\": dataAttr(itemState.selected),\n        \"data-layout\": layout,\n        \"data-state\": itemState.selected ? \"checked\" : \"unchecked\",\n        \"data-orientation\": prop(\"orientation\"),\n        \"data-highlighted\": dataAttr(itemState.highlighted),\n        \"data-disabled\": dataAttr(itemState.disabled),\n        \"aria-disabled\": ariaAttr(itemState.disabled),\n        onPointerMove(event) {\n          if (!props2.highlightOnHover) return;\n          if (itemState.disabled || event.pointerType !== \"mouse\") return;\n          if (itemState.highlighted) return;\n          send({\n            type: \"ITEM.POINTER_MOVE\",\n            value: itemState.value\n          });\n        },\n        onMouseDown(event) {\n          event.preventDefault();\n          getContentEl(scope)?.focus();\n        },\n        onClick(event) {\n          if (event.defaultPrevented) return;\n          if (itemState.disabled) return;\n          send({\n            type: \"ITEM.CLICK\",\n            value: itemState.value,\n            shiftKey: event.shiftKey,\n            anchorValue: highlightedValue,\n            metaKey: isCtrlOrMetaKey(event)\n          });\n        }\n      });\n    },\n    getItemTextProps(props2) {\n      const itemState = getItemState(props2);\n      return normalize.element({\n        ...parts.itemText.attrs,\n        \"data-state\": itemState.selected ? \"checked\" : \"unchecked\",\n        \"data-disabled\": dataAttr(itemState.disabled),\n        \"data-highlighted\": dataAttr(itemState.highlighted)\n      });\n    },\n    getItemIndicatorProps(props2) {\n      const itemState = getItemState(props2);\n      return normalize.element({\n        ...parts.itemIndicator.attrs,\n        \"aria-hidden\": true,\n        \"data-state\": itemState.selected ? \"checked\" : \"unchecked\",\n        hidden: !itemState.selected\n      });\n    },\n    getItemGroupLabelProps(props2) {\n      const {\n        htmlFor\n      } = props2;\n      return normalize.element({\n        ...parts.itemGroupLabel.attrs,\n        id: getItemGroupLabelId(scope, htmlFor),\n        dir: prop(\"dir\"),\n        role: \"presentation\"\n      });\n    },\n    getItemGroupProps(props2) {\n      const {\n        id\n      } = props2;\n      return normalize.element({\n        ...parts.itemGroup.attrs,\n        \"data-disabled\": dataAttr(disabled),\n        \"data-orientation\": prop(\"orientation\"),\n        \"data-empty\": dataAttr(collection2.size === 0),\n        id: getItemGroupId(scope, id),\n        \"aria-labelledby\": getItemGroupLabelId(scope, id),\n        role: \"group\",\n        dir: prop(\"dir\")\n      });\n    },\n    getContentProps() {\n      return normalize.element({\n        dir: prop(\"dir\"),\n        id: getContentId(scope),\n        role: \"listbox\",\n        ...parts.content.attrs,\n        \"data-activedescendant\": ariaActiveDescendant,\n        \"aria-activedescendant\": ariaActiveDescendant,\n        \"data-orientation\": prop(\"orientation\"),\n        \"aria-multiselectable\": computed(\"multiple\") ? true : void 0,\n        \"aria-labelledby\": getLabelId(scope),\n        tabIndex: 0,\n        \"data-layout\": layout,\n        \"data-empty\": dataAttr(collection2.size === 0),\n        style: {\n          \"--column-count\": isGridCollection(collection2) ? collection2.columnCount : 1\n        },\n        onFocus() {\n          send({\n            type: \"CONTENT.FOCUS\"\n          });\n        },\n        onBlur() {\n          send({\n            type: \"CONTENT.BLUR\"\n          });\n        },\n        onKeyDown(event) {\n          if (!interactive) return;\n          if (!contains(event.currentTarget, getEventTarget(event))) return;\n          const shiftKey = event.shiftKey;\n          const keyMap = {\n            ArrowUp(event2) {\n              let nextValue = null;\n              if (isGridCollection(collection2) && highlightedValue) {\n                nextValue = collection2.getPreviousRowValue(highlightedValue);\n              } else if (highlightedValue) {\n                nextValue = collection2.getPreviousValue(highlightedValue);\n              }\n              if (!nextValue && (prop(\"loopFocus\") || !highlightedValue)) {\n                nextValue = collection2.lastValue;\n              }\n              if (!nextValue) return;\n              event2.preventDefault();\n              send({\n                type: \"NAVIGATE\",\n                value: nextValue,\n                shiftKey,\n                anchorValue: highlightedValue\n              });\n            },\n            ArrowDown(event2) {\n              let nextValue = null;\n              if (isGridCollection(collection2) && highlightedValue) {\n                nextValue = collection2.getNextRowValue(highlightedValue);\n              } else if (highlightedValue) {\n                nextValue = collection2.getNextValue(highlightedValue);\n              }\n              if (!nextValue && (prop(\"loopFocus\") || !highlightedValue)) {\n                nextValue = collection2.firstValue;\n              }\n              if (!nextValue) return;\n              event2.preventDefault();\n              send({\n                type: \"NAVIGATE\",\n                value: nextValue,\n                shiftKey,\n                anchorValue: highlightedValue\n              });\n            },\n            ArrowLeft() {\n              if (!isGridCollection(collection2) && prop(\"orientation\") === \"vertical\") return;\n              let nextValue = highlightedValue ? collection2.getPreviousValue(highlightedValue) : null;\n              if (!nextValue && prop(\"loopFocus\")) {\n                nextValue = collection2.lastValue;\n              }\n              if (!nextValue) return;\n              event.preventDefault();\n              send({\n                type: \"NAVIGATE\",\n                value: nextValue,\n                shiftKey,\n                anchorValue: highlightedValue\n              });\n            },\n            ArrowRight() {\n              if (!isGridCollection(collection2) && prop(\"orientation\") === \"vertical\") return;\n              let nextValue = highlightedValue ? collection2.getNextValue(highlightedValue) : null;\n              if (!nextValue && prop(\"loopFocus\")) {\n                nextValue = collection2.firstValue;\n              }\n              if (!nextValue) return;\n              event.preventDefault();\n              send({\n                type: \"NAVIGATE\",\n                value: nextValue,\n                shiftKey,\n                anchorValue: highlightedValue\n              });\n            },\n            Home(event2) {\n              event2.preventDefault();\n              let nextValue = collection2.firstValue;\n              send({\n                type: \"NAVIGATE\",\n                value: nextValue,\n                shiftKey,\n                anchorValue: highlightedValue\n              });\n            },\n            End(event2) {\n              event2.preventDefault();\n              let nextValue = collection2.lastValue;\n              send({\n                type: \"NAVIGATE\",\n                value: nextValue,\n                shiftKey,\n                anchorValue: highlightedValue\n              });\n            },\n            Enter() {\n              send({\n                type: \"ITEM.CLICK\",\n                value: highlightedValue\n              });\n            },\n            a(event2) {\n              if (isCtrlOrMetaKey(event2) && computed(\"multiple\") && !prop(\"disallowSelectAll\")) {\n                event2.preventDefault();\n                send({\n                  type: \"VALUE.SET\",\n                  value: collection2.getValues()\n                });\n              }\n            },\n            Space(event2) {\n              if (isTypingAhead && prop(\"typeahead\")) {\n                send({\n                  type: \"CONTENT.TYPEAHEAD\",\n                  key: event2.key\n                });\n              } else {\n                keyMap.Enter?.(event2);\n              }\n            },\n            Escape(event2) {\n              if (prop(\"deselectable\") && value.length > 0) {\n                event2.preventDefault();\n                event2.stopPropagation();\n                send({\n                  type: \"VALUE.CLEAR\"\n                });\n              }\n            }\n          };\n          const exec = keyMap[getEventKey(event)];\n          if (exec) {\n            exec(event);\n            return;\n          }\n          const target = getEventTarget(event);\n          if (isEditableElement(target)) {\n            return;\n          }\n          if (getByTypeahead.isValidEvent(event) && prop(\"typeahead\")) {\n            send({\n              type: \"CONTENT.TYPEAHEAD\",\n              key: event.key\n            });\n            event.preventDefault();\n          }\n        }\n      });\n    }\n  };\n}\nvar {\n  guards,\n  createMachine\n} = setup();\nvar {\n  or\n} = guards;\nvar machine = createMachine({\n  props({\n    props: props2\n  }) {\n    return {\n      loopFocus: false,\n      composite: true,\n      defaultValue: [],\n      multiple: false,\n      typeahead: true,\n      collection: collection.empty(),\n      orientation: \"vertical\",\n      selectionMode: \"single\",\n      ...props2\n    };\n  },\n  context({\n    prop,\n    bindable\n  }) {\n    return {\n      value: bindable(() => ({\n        defaultValue: prop(\"defaultValue\"),\n        value: prop(\"value\"),\n        isEqual,\n        onChange(value) {\n          const items = prop(\"collection\").findMany(value);\n          return prop(\"onValueChange\")?.({\n            value,\n            items\n          });\n        }\n      })),\n      highlightedValue: bindable(() => ({\n        defaultValue: prop(\"defaultHighlightedValue\") || null,\n        value: prop(\"highlightedValue\"),\n        sync: true,\n        onChange(value) {\n          prop(\"onHighlightChange\")?.({\n            highlightedValue: value,\n            highlightedItem: prop(\"collection\").find(value),\n            highlightedIndex: prop(\"collection\").indexOf(value)\n          });\n        }\n      })),\n      highlightedItem: bindable(() => ({\n        defaultValue: null\n      })),\n      selectedItems: bindable(() => {\n        const value = prop(\"value\") ?? prop(\"defaultValue\") ?? [];\n        const items = prop(\"collection\").findMany(value);\n        return {\n          defaultValue: items\n        };\n      }),\n      focused: bindable(() => ({\n        sync: true,\n        defaultValue: false\n      }))\n    };\n  },\n  refs() {\n    return {\n      typeahead: {\n        ...getByTypeahead.defaultOptions\n      },\n      focusVisible: false\n    };\n  },\n  computed: {\n    hasSelectedItems: ({\n      context\n    }) => context.get(\"value\").length > 0,\n    isTypingAhead: ({\n      refs\n    }) => refs.get(\"typeahead\").keysSoFar !== \"\",\n    isInteractive: ({\n      prop\n    }) => !prop(\"disabled\"),\n    selection: ({\n      context,\n      prop\n    }) => {\n      const selection = new Selection(context.get(\"value\"));\n      selection.selectionMode = prop(\"selectionMode\");\n      selection.deselectable = !!prop(\"deselectable\");\n      return selection;\n    },\n    multiple: ({\n      prop\n    }) => prop(\"selectionMode\") === \"multiple\" || prop(\"selectionMode\") === \"extended\",\n    valueAsString: ({\n      context,\n      prop\n    }) => prop(\"collection\").stringifyItems(context.get(\"selectedItems\"))\n  },\n  initialState() {\n    return \"idle\";\n  },\n  watch({\n    context,\n    prop,\n    track,\n    action\n  }) {\n    track([() => context.get(\"value\").toString()], () => {\n      action([\"syncSelectedItems\"]);\n    });\n    track([() => context.get(\"highlightedValue\")], () => {\n      action([\"syncHighlightedItem\"]);\n    });\n    track([() => prop(\"collection\").toString()], () => {\n      action([\"syncHighlightedValue\"]);\n    });\n  },\n  effects: [\"trackFocusVisible\"],\n  on: {\n    \"HIGHLIGHTED_VALUE.SET\": {\n      actions: [\"setHighlightedItem\"]\n    },\n    \"ITEM.SELECT\": {\n      actions: [\"selectItem\"]\n    },\n    \"ITEM.CLEAR\": {\n      actions: [\"clearItem\"]\n    },\n    \"VALUE.SET\": {\n      actions: [\"setSelectedItems\"]\n    },\n    \"VALUE.CLEAR\": {\n      actions: [\"clearSelectedItems\"]\n    }\n  },\n  states: {\n    idle: {\n      effects: [\"scrollToHighlightedItem\"],\n      on: {\n        \"INPUT.FOCUS\": {\n          actions: [\"setFocused\"]\n        },\n        \"CONTENT.FOCUS\": [{\n          guard: or(\"hasSelectedValue\", \"hasHighlightedValue\"),\n          actions: [\"setFocused\"]\n        }, {\n          actions: [\"setFocused\", \"setDefaultHighlightedValue\"]\n        }],\n        \"CONTENT.BLUR\": {\n          actions: [\"clearFocused\"]\n        },\n        \"ITEM.CLICK\": {\n          actions: [\"setHighlightedItem\", \"selectHighlightedItem\"]\n        },\n        \"CONTENT.TYPEAHEAD\": {\n          actions: [\"setFocused\", \"highlightMatchingItem\"]\n        },\n        \"ITEM.POINTER_MOVE\": {\n          actions: [\"highlightItem\"]\n        },\n        \"ITEM.POINTER_LEAVE\": {\n          actions: [\"clearHighlightedItem\"]\n        },\n        NAVIGATE: {\n          actions: [\"setFocused\", \"setHighlightedItem\", \"selectWithKeyboard\"]\n        }\n      }\n    }\n  },\n  implementations: {\n    guards: {\n      hasSelectedValue: ({\n        context\n      }) => context.get(\"value\").length > 0,\n      hasHighlightedValue: ({\n        context\n      }) => context.get(\"highlightedValue\") != null\n    },\n    effects: {\n      trackFocusVisible: ({\n        scope,\n        refs\n      }) => {\n        return trackFocusVisible({\n          root: scope.getRootNode?.(),\n          onChange(details) {\n            refs.set(\"focusVisible\", details.isFocusVisible);\n          }\n        });\n      },\n      scrollToHighlightedItem({\n        context,\n        prop,\n        scope\n      }) {\n        const exec = immediate => {\n          const highlightedValue = context.get(\"highlightedValue\");\n          if (highlightedValue == null) return;\n          const modality = getInteractionModality();\n          if (modality !== \"keyboard\") return;\n          const contentEl2 = getContentEl(scope);\n          const scrollToIndexFn = prop(\"scrollToIndexFn\");\n          if (scrollToIndexFn) {\n            const highlightedIndex = prop(\"collection\").indexOf(highlightedValue);\n            scrollToIndexFn?.({\n              index: highlightedIndex,\n              immediate,\n              getElement() {\n                return getItemEl(scope, highlightedValue);\n              }\n            });\n            return;\n          }\n          const itemEl = getItemEl(scope, highlightedValue);\n          scrollIntoView(itemEl, {\n            rootEl: contentEl2,\n            block: \"nearest\"\n          });\n        };\n        raf(() => exec(true));\n        const contentEl = () => getContentEl(scope);\n        return observeAttributes(contentEl, {\n          defer: true,\n          attributes: [\"data-activedescendant\"],\n          callback() {\n            exec(false);\n          }\n        });\n      }\n    },\n    actions: {\n      selectHighlightedItem({\n        context,\n        prop,\n        event,\n        computed\n      }) {\n        const value = event.value ?? context.get(\"highlightedValue\");\n        const collection2 = prop(\"collection\");\n        if (value == null || !collection2.has(value)) return;\n        const selection = computed(\"selection\");\n        if (event.shiftKey && computed(\"multiple\") && event.anchorValue) {\n          const next = selection.extendSelection(collection2, event.anchorValue, value);\n          invokeOnSelect(selection, next, prop(\"onSelect\"));\n          context.set(\"value\", Array.from(next));\n        } else {\n          const next = selection.select(collection2, value, event.metaKey);\n          invokeOnSelect(selection, next, prop(\"onSelect\"));\n          context.set(\"value\", Array.from(next));\n        }\n      },\n      selectWithKeyboard({\n        context,\n        prop,\n        event,\n        computed\n      }) {\n        const selection = computed(\"selection\");\n        const collection2 = prop(\"collection\");\n        if (event.shiftKey && computed(\"multiple\") && event.anchorValue) {\n          const next = selection.extendSelection(collection2, event.anchorValue, event.value);\n          invokeOnSelect(selection, next, prop(\"onSelect\"));\n          context.set(\"value\", Array.from(next));\n          return;\n        }\n        if (prop(\"selectOnHighlight\")) {\n          const next = selection.replaceSelection(collection2, event.value);\n          invokeOnSelect(selection, next, prop(\"onSelect\"));\n          context.set(\"value\", Array.from(next));\n        }\n      },\n      highlightItem({\n        context,\n        event\n      }) {\n        context.set(\"highlightedValue\", event.value);\n      },\n      highlightMatchingItem({\n        context,\n        prop,\n        event,\n        refs\n      }) {\n        const value = prop(\"collection\").search(event.key, {\n          state: refs.get(\"typeahead\"),\n          currentValue: context.get(\"highlightedValue\")\n        });\n        if (value == null) return;\n        context.set(\"highlightedValue\", value);\n      },\n      setHighlightedItem({\n        context,\n        event\n      }) {\n        context.set(\"highlightedValue\", event.value);\n      },\n      clearHighlightedItem({\n        context\n      }) {\n        context.set(\"highlightedValue\", null);\n      },\n      selectItem({\n        context,\n        prop,\n        event,\n        computed\n      }) {\n        const collection2 = prop(\"collection\");\n        const selection = computed(\"selection\");\n        const next = selection.select(collection2, event.value);\n        invokeOnSelect(selection, next, prop(\"onSelect\"));\n        context.set(\"value\", Array.from(next));\n      },\n      clearItem({\n        context,\n        event,\n        computed\n      }) {\n        const selection = computed(\"selection\");\n        const value = selection.deselect(event.value);\n        context.set(\"value\", Array.from(value));\n      },\n      setSelectedItems({\n        context,\n        event\n      }) {\n        context.set(\"value\", event.value);\n      },\n      clearSelectedItems({\n        context\n      }) {\n        context.set(\"value\", []);\n      },\n      syncSelectedItems({\n        context,\n        prop\n      }) {\n        const collection2 = prop(\"collection\");\n        const prevSelectedItems = context.get(\"selectedItems\");\n        const value = context.get(\"value\");\n        const selectedItems = value.map(value2 => {\n          const item = prevSelectedItems.find(item2 => collection2.getItemValue(item2) === value2);\n          return item || collection2.find(value2);\n        });\n        context.set(\"selectedItems\", selectedItems);\n      },\n      syncHighlightedItem({\n        context,\n        prop\n      }) {\n        const collection2 = prop(\"collection\");\n        const highlightedValue = context.get(\"highlightedValue\");\n        const highlightedItem = highlightedValue ? collection2.find(highlightedValue) : null;\n        context.set(\"highlightedItem\", highlightedItem);\n      },\n      syncHighlightedValue({\n        context,\n        prop\n      }) {\n        const collection2 = prop(\"collection\");\n        const highlightedValue = context.get(\"highlightedValue\");\n        if (highlightedValue != null && !collection2.has(highlightedValue)) {\n          context.set(\"highlightedValue\", null);\n        }\n      },\n      setFocused({\n        context\n      }) {\n        context.set(\"focused\", true);\n      },\n      setDefaultHighlightedValue({\n        context,\n        prop\n      }) {\n        const collection2 = prop(\"collection\");\n        const firstValue = collection2.firstValue;\n        if (firstValue != null) {\n          context.set(\"highlightedValue\", firstValue);\n        }\n      },\n      clearFocused({\n        context\n      }) {\n        context.set(\"focused\", false);\n      }\n    }\n  }\n});\nvar diff = (a, b) => {\n  const result = new Set(a);\n  for (const item of b) result.delete(item);\n  return result;\n};\nfunction invokeOnSelect(current, next, onSelect) {\n  const added = diff(next, current);\n  for (const item of added) {\n    onSelect?.({\n      value: item\n    });\n  }\n}\nvar props = createProps()([\"collection\", \"defaultHighlightedValue\", \"defaultValue\", \"dir\", \"disabled\", \"deselectable\", \"disallowSelectAll\", \"getRootNode\", \"highlightedValue\", \"id\", \"ids\", \"loopFocus\", \"onHighlightChange\", \"onSelect\", \"onValueChange\", \"orientation\", \"scrollToIndexFn\", \"selectionMode\", \"selectOnHighlight\", \"typeahead\", \"value\"]);\nvar splitProps = createSplitProps(props);\nvar itemProps = createProps()([\"item\", \"highlightOnHover\"]);\nvar splitItemProps = createSplitProps(itemProps);\nvar itemGroupProps = createProps()([\"id\"]);\nvar splitItemGroupProps = createSplitProps(itemGroupProps);\nvar itemGroupLabelProps = createProps()([\"htmlFor\"]);\nvar splitItemGroupLabelProps = createSplitProps(itemGroupLabelProps);\nexport { anatomy, collection, connect, gridCollection, itemGroupLabelProps, itemGroupProps, itemProps, machine, props, splitItemGroupLabelProps, splitItemGroupProps, splitItemProps, splitProps };","map":{"version":3,"names":["createAnatomy","Selection","ListCollection","GridCollection","isGridCollection","raf","observeAttributes","getByTypeahead","scrollIntoView","dataAttr","contains","getEventTarget","getEventKey","isEditableElement","ariaAttr","isCtrlOrMetaKey","isComposingEvent","getNativeEvent","isEqual","createSplitProps","ensure","setup","trackFocusVisible","getInteractionModality","createProps","anatomy","parts","build","collection","options","empty","items","gridCollection","columnCount","getRootId","ctx","ids","root","id","getContentId","content","getLabelId","label","getItemId","item","getItemGroupId","itemGroup","getItemGroupLabelId","itemGroupLabel","getContentEl","getById","getItemEl","connect","service","normalize","context","prop","scope","computed","send","refs","disabled","collection2","layout","focused","get","focusVisible","value","selectedItems","highlightedValue","highlightedItem","isTypingAhead","interactive","ariaActiveDescendant","getItemState","props2","itemDisabled","getItemDisabled","value2","getItemValue","JSON","stringify","highlighted","Boolean","selected","includes","length","clearHighlightedValue","type","hasSelectedItems","valueAsString","selectValue","setValue","selectAll","Error","getValues","highlightValue","clearValue","getRootProps","element","attrs","dir","getInputProps","input","autoComplete","autoCorrect","spellCheck","enterKeyHint","onFocus","queueMicrotask","onBlur","src","onInput","event","autoHighlight","node","currentTarget","isConnected","firstValue","onKeyDown","defaultPrevented","nativeEvent","forwardEvent","preventDefault","win","getWin","keyboardEvent","KeyboardEvent","dispatchEvent","key","ctrlKey","shiftKey","getLabelProps","getValueTextProps","valueText","getItemProps","itemState","role","onPointerMove","highlightOnHover","pointerType","onMouseDown","focus","onClick","anchorValue","metaKey","getItemTextProps","itemText","getItemIndicatorProps","itemIndicator","hidden","getItemGroupLabelProps","htmlFor","getItemGroupProps","size","getContentProps","tabIndex","style","keyMap","ArrowUp","event2","nextValue","getPreviousRowValue","getPreviousValue","lastValue","ArrowDown","getNextRowValue","getNextValue","ArrowLeft","ArrowRight","Home","End","Enter","a","Space","Escape","stopPropagation","exec","target","isValidEvent","guards","createMachine","or","machine","props","loopFocus","composite","defaultValue","multiple","typeahead","orientation","selectionMode","bindable","onChange","findMany","sync","find","highlightedIndex","indexOf","defaultOptions","keysSoFar","isInteractive","selection","deselectable","stringifyItems","initialState","watch","track","action","toString","effects","on","actions","states","idle","guard","NAVIGATE","implementations","hasSelectedValue","hasHighlightedValue","getRootNode","details","set","isFocusVisible","scrollToHighlightedItem","immediate","modality","contentEl2","scrollToIndexFn","index","getElement","itemEl","rootEl","block","contentEl","defer","attributes","callback","selectHighlightedItem","has","next","extendSelection","invokeOnSelect","Array","from","select","selectWithKeyboard","replaceSelection","highlightItem","highlightMatchingItem","search","state","currentValue","setHighlightedItem","clearHighlightedItem","selectItem","clearItem","deselect","setSelectedItems","clearSelectedItems","syncSelectedItems","prevSelectedItems","map","item2","syncHighlightedItem","syncHighlightedValue","setFocused","setDefaultHighlightedValue","clearFocused","diff","b","result","Set","delete","current","onSelect","added","splitProps","itemProps","splitItemProps","itemGroupProps","splitItemGroupProps","itemGroupLabelProps","splitItemGroupLabelProps"],"sources":["/Users/ameliamagick/personal-finance-tracker/node_modules/@zag-js/listbox/dist/index.mjs"],"sourcesContent":["import { createAnatomy } from '@zag-js/anatomy';\nimport { Selection, ListCollection, GridCollection, isGridCollection } from '@zag-js/collection';\nimport { raf, observeAttributes, getByTypeahead, scrollIntoView, dataAttr, contains, getEventTarget, getEventKey, isEditableElement, ariaAttr, isCtrlOrMetaKey, isComposingEvent, getNativeEvent } from '@zag-js/dom-query';\nimport { isEqual, createSplitProps, ensure } from '@zag-js/utils';\nimport { setup } from '@zag-js/core';\nimport { trackFocusVisible, getInteractionModality } from '@zag-js/focus-visible';\nimport { createProps } from '@zag-js/types';\n\n// src/listbox.anatomy.ts\nvar anatomy = createAnatomy(\"listbox\").parts(\n  \"label\",\n  \"input\",\n  \"item\",\n  \"itemText\",\n  \"itemIndicator\",\n  \"itemGroup\",\n  \"itemGroupLabel\",\n  \"content\",\n  \"root\",\n  \"valueText\"\n);\nvar parts = anatomy.build();\nvar collection = (options) => {\n  return new ListCollection(options);\n};\ncollection.empty = () => {\n  return new ListCollection({ items: [] });\n};\nvar gridCollection = (options) => {\n  return new GridCollection(options);\n};\ngridCollection.empty = () => {\n  return new GridCollection({ items: [], columnCount: 0 });\n};\n\n// src/listbox.dom.ts\nvar getRootId = (ctx) => ctx.ids?.root ?? `select:${ctx.id}`;\nvar getContentId = (ctx) => ctx.ids?.content ?? `select:${ctx.id}:content`;\nvar getLabelId = (ctx) => ctx.ids?.label ?? `select:${ctx.id}:label`;\nvar getItemId = (ctx, id) => ctx.ids?.item?.(id) ?? `select:${ctx.id}:option:${id}`;\nvar getItemGroupId = (ctx, id) => ctx.ids?.itemGroup?.(id) ?? `select:${ctx.id}:optgroup:${id}`;\nvar getItemGroupLabelId = (ctx, id) => ctx.ids?.itemGroupLabel?.(id) ?? `select:${ctx.id}:optgroup-label:${id}`;\nvar getContentEl = (ctx) => ctx.getById(getContentId(ctx));\nvar getItemEl = (ctx, id) => ctx.getById(getItemId(ctx, id));\n\n// src/listbox.connect.ts\nfunction connect(service, normalize) {\n  const { context, prop, scope, computed, send, refs } = service;\n  const disabled = prop(\"disabled\");\n  const collection2 = prop(\"collection\");\n  const layout = isGridCollection(collection2) ? \"grid\" : \"list\";\n  const focused = context.get(\"focused\");\n  const focusVisible = refs.get(\"focusVisible\") && focused;\n  const value = context.get(\"value\");\n  const selectedItems = context.get(\"selectedItems\");\n  const highlightedValue = context.get(\"highlightedValue\");\n  const highlightedItem = context.get(\"highlightedItem\");\n  const isTypingAhead = computed(\"isTypingAhead\");\n  const interactive = computed(\"isInteractive\");\n  const ariaActiveDescendant = highlightedValue ? getItemId(scope, highlightedValue) : void 0;\n  function getItemState(props2) {\n    const itemDisabled = collection2.getItemDisabled(props2.item);\n    const value2 = collection2.getItemValue(props2.item);\n    ensure(value2, () => `[zag-js] No value found for item ${JSON.stringify(props2.item)}`);\n    const highlighted = highlightedValue === value2;\n    return {\n      value: value2,\n      disabled: Boolean(disabled || itemDisabled),\n      focused: highlighted && focused,\n      focusVisible: highlighted && focusVisible,\n      // deprecated\n      highlighted: highlighted && focusVisible,\n      selected: context.get(\"value\").includes(value2)\n    };\n  }\n  return {\n    empty: value.length === 0,\n    highlightedItem,\n    highlightedValue,\n    clearHighlightedValue() {\n      send({ type: \"HIGHLIGHTED_VALUE.SET\", value: null });\n    },\n    selectedItems,\n    hasSelectedItems: computed(\"hasSelectedItems\"),\n    value,\n    valueAsString: computed(\"valueAsString\"),\n    collection: collection2,\n    disabled: !!disabled,\n    selectValue(value2) {\n      send({ type: \"ITEM.SELECT\", value: value2 });\n    },\n    setValue(value2) {\n      send({ type: \"VALUE.SET\", value: value2 });\n    },\n    selectAll() {\n      if (!computed(\"multiple\")) {\n        throw new Error(\"[zag-js] Cannot select all items in a single-select listbox\");\n      }\n      send({ type: \"VALUE.SET\", value: collection2.getValues() });\n    },\n    highlightValue(value2) {\n      send({ type: \"HIGHLIGHTED_VALUE.SET\", value: value2 });\n    },\n    clearValue(value2) {\n      if (value2) {\n        send({ type: \"ITEM.CLEAR\", value: value2 });\n      } else {\n        send({ type: \"VALUE.CLEAR\" });\n      }\n    },\n    getItemState,\n    getRootProps() {\n      return normalize.element({\n        ...parts.root.attrs,\n        dir: prop(\"dir\"),\n        id: getRootId(scope),\n        \"data-orientation\": prop(\"orientation\"),\n        \"data-disabled\": dataAttr(disabled)\n      });\n    },\n    getInputProps(props2 = {}) {\n      return normalize.input({\n        ...parts.input.attrs,\n        dir: prop(\"dir\"),\n        disabled,\n        \"data-disabled\": dataAttr(disabled),\n        autoComplete: \"off\",\n        autoCorrect: \"off\",\n        \"aria-haspopup\": \"listbox\",\n        \"aria-controls\": getContentId(scope),\n        \"aria-autocomplete\": \"list\",\n        \"aria-activedescendant\": ariaActiveDescendant,\n        spellCheck: false,\n        enterKeyHint: \"go\",\n        onFocus() {\n          queueMicrotask(() => {\n            send({ type: \"INPUT.FOCUS\" });\n          });\n        },\n        onBlur() {\n          send({ type: \"CONTENT.BLUR\", src: \"input\" });\n        },\n        onInput(event) {\n          if (!props2.autoHighlight) return;\n          const node = event.currentTarget;\n          queueMicrotask(() => {\n            if (!node.isConnected) return;\n            send({\n              type: \"HIGHLIGHTED_VALUE.SET\",\n              value: node.value ? prop(\"collection\").firstValue : null\n            });\n          });\n        },\n        onKeyDown(event) {\n          if (event.defaultPrevented) return;\n          if (isComposingEvent(event)) return;\n          const nativeEvent = getNativeEvent(event);\n          const forwardEvent = () => {\n            event.preventDefault();\n            const win = scope.getWin();\n            const keyboardEvent = new win.KeyboardEvent(nativeEvent.type, nativeEvent);\n            getContentEl(scope)?.dispatchEvent(keyboardEvent);\n          };\n          switch (nativeEvent.key) {\n            case \"ArrowLeft\":\n            case \"ArrowRight\": {\n              if (!isGridCollection(collection2)) return;\n              if (event.ctrlKey) return;\n              forwardEvent();\n            }\n            case \"Home\":\n            case \"End\": {\n              if (highlightedValue == null && event.shiftKey) return;\n              forwardEvent();\n            }\n            case \"ArrowDown\":\n            case \"ArrowUp\": {\n              forwardEvent();\n              break;\n            }\n            case \"Enter\":\n              event.preventDefault();\n              send({ type: \"ITEM.CLICK\", value: highlightedValue });\n              break;\n          }\n        }\n      });\n    },\n    getLabelProps() {\n      return normalize.element({\n        dir: prop(\"dir\"),\n        id: getLabelId(scope),\n        ...parts.label.attrs,\n        \"data-disabled\": dataAttr(disabled)\n      });\n    },\n    getValueTextProps() {\n      return normalize.element({\n        ...parts.valueText.attrs,\n        dir: prop(\"dir\"),\n        \"data-disabled\": dataAttr(disabled)\n      });\n    },\n    getItemProps(props2) {\n      const itemState = getItemState(props2);\n      return normalize.element({\n        id: getItemId(scope, itemState.value),\n        role: \"option\",\n        ...parts.item.attrs,\n        dir: prop(\"dir\"),\n        \"data-value\": itemState.value,\n        \"aria-selected\": itemState.selected,\n        \"data-selected\": dataAttr(itemState.selected),\n        \"data-layout\": layout,\n        \"data-state\": itemState.selected ? \"checked\" : \"unchecked\",\n        \"data-orientation\": prop(\"orientation\"),\n        \"data-highlighted\": dataAttr(itemState.highlighted),\n        \"data-disabled\": dataAttr(itemState.disabled),\n        \"aria-disabled\": ariaAttr(itemState.disabled),\n        onPointerMove(event) {\n          if (!props2.highlightOnHover) return;\n          if (itemState.disabled || event.pointerType !== \"mouse\") return;\n          if (itemState.highlighted) return;\n          send({ type: \"ITEM.POINTER_MOVE\", value: itemState.value });\n        },\n        onMouseDown(event) {\n          event.preventDefault();\n          getContentEl(scope)?.focus();\n        },\n        onClick(event) {\n          if (event.defaultPrevented) return;\n          if (itemState.disabled) return;\n          send({\n            type: \"ITEM.CLICK\",\n            value: itemState.value,\n            shiftKey: event.shiftKey,\n            anchorValue: highlightedValue,\n            metaKey: isCtrlOrMetaKey(event)\n          });\n        }\n      });\n    },\n    getItemTextProps(props2) {\n      const itemState = getItemState(props2);\n      return normalize.element({\n        ...parts.itemText.attrs,\n        \"data-state\": itemState.selected ? \"checked\" : \"unchecked\",\n        \"data-disabled\": dataAttr(itemState.disabled),\n        \"data-highlighted\": dataAttr(itemState.highlighted)\n      });\n    },\n    getItemIndicatorProps(props2) {\n      const itemState = getItemState(props2);\n      return normalize.element({\n        ...parts.itemIndicator.attrs,\n        \"aria-hidden\": true,\n        \"data-state\": itemState.selected ? \"checked\" : \"unchecked\",\n        hidden: !itemState.selected\n      });\n    },\n    getItemGroupLabelProps(props2) {\n      const { htmlFor } = props2;\n      return normalize.element({\n        ...parts.itemGroupLabel.attrs,\n        id: getItemGroupLabelId(scope, htmlFor),\n        dir: prop(\"dir\"),\n        role: \"presentation\"\n      });\n    },\n    getItemGroupProps(props2) {\n      const { id } = props2;\n      return normalize.element({\n        ...parts.itemGroup.attrs,\n        \"data-disabled\": dataAttr(disabled),\n        \"data-orientation\": prop(\"orientation\"),\n        \"data-empty\": dataAttr(collection2.size === 0),\n        id: getItemGroupId(scope, id),\n        \"aria-labelledby\": getItemGroupLabelId(scope, id),\n        role: \"group\",\n        dir: prop(\"dir\")\n      });\n    },\n    getContentProps() {\n      return normalize.element({\n        dir: prop(\"dir\"),\n        id: getContentId(scope),\n        role: \"listbox\",\n        ...parts.content.attrs,\n        \"data-activedescendant\": ariaActiveDescendant,\n        \"aria-activedescendant\": ariaActiveDescendant,\n        \"data-orientation\": prop(\"orientation\"),\n        \"aria-multiselectable\": computed(\"multiple\") ? true : void 0,\n        \"aria-labelledby\": getLabelId(scope),\n        tabIndex: 0,\n        \"data-layout\": layout,\n        \"data-empty\": dataAttr(collection2.size === 0),\n        style: {\n          \"--column-count\": isGridCollection(collection2) ? collection2.columnCount : 1\n        },\n        onFocus() {\n          send({ type: \"CONTENT.FOCUS\" });\n        },\n        onBlur() {\n          send({ type: \"CONTENT.BLUR\" });\n        },\n        onKeyDown(event) {\n          if (!interactive) return;\n          if (!contains(event.currentTarget, getEventTarget(event))) return;\n          const shiftKey = event.shiftKey;\n          const keyMap = {\n            ArrowUp(event2) {\n              let nextValue = null;\n              if (isGridCollection(collection2) && highlightedValue) {\n                nextValue = collection2.getPreviousRowValue(highlightedValue);\n              } else if (highlightedValue) {\n                nextValue = collection2.getPreviousValue(highlightedValue);\n              }\n              if (!nextValue && (prop(\"loopFocus\") || !highlightedValue)) {\n                nextValue = collection2.lastValue;\n              }\n              if (!nextValue) return;\n              event2.preventDefault();\n              send({ type: \"NAVIGATE\", value: nextValue, shiftKey, anchorValue: highlightedValue });\n            },\n            ArrowDown(event2) {\n              let nextValue = null;\n              if (isGridCollection(collection2) && highlightedValue) {\n                nextValue = collection2.getNextRowValue(highlightedValue);\n              } else if (highlightedValue) {\n                nextValue = collection2.getNextValue(highlightedValue);\n              }\n              if (!nextValue && (prop(\"loopFocus\") || !highlightedValue)) {\n                nextValue = collection2.firstValue;\n              }\n              if (!nextValue) return;\n              event2.preventDefault();\n              send({ type: \"NAVIGATE\", value: nextValue, shiftKey, anchorValue: highlightedValue });\n            },\n            ArrowLeft() {\n              if (!isGridCollection(collection2) && prop(\"orientation\") === \"vertical\") return;\n              let nextValue = highlightedValue ? collection2.getPreviousValue(highlightedValue) : null;\n              if (!nextValue && prop(\"loopFocus\")) {\n                nextValue = collection2.lastValue;\n              }\n              if (!nextValue) return;\n              event.preventDefault();\n              send({ type: \"NAVIGATE\", value: nextValue, shiftKey, anchorValue: highlightedValue });\n            },\n            ArrowRight() {\n              if (!isGridCollection(collection2) && prop(\"orientation\") === \"vertical\") return;\n              let nextValue = highlightedValue ? collection2.getNextValue(highlightedValue) : null;\n              if (!nextValue && prop(\"loopFocus\")) {\n                nextValue = collection2.firstValue;\n              }\n              if (!nextValue) return;\n              event.preventDefault();\n              send({ type: \"NAVIGATE\", value: nextValue, shiftKey, anchorValue: highlightedValue });\n            },\n            Home(event2) {\n              event2.preventDefault();\n              let nextValue = collection2.firstValue;\n              send({ type: \"NAVIGATE\", value: nextValue, shiftKey, anchorValue: highlightedValue });\n            },\n            End(event2) {\n              event2.preventDefault();\n              let nextValue = collection2.lastValue;\n              send({ type: \"NAVIGATE\", value: nextValue, shiftKey, anchorValue: highlightedValue });\n            },\n            Enter() {\n              send({ type: \"ITEM.CLICK\", value: highlightedValue });\n            },\n            a(event2) {\n              if (isCtrlOrMetaKey(event2) && computed(\"multiple\") && !prop(\"disallowSelectAll\")) {\n                event2.preventDefault();\n                send({ type: \"VALUE.SET\", value: collection2.getValues() });\n              }\n            },\n            Space(event2) {\n              if (isTypingAhead && prop(\"typeahead\")) {\n                send({ type: \"CONTENT.TYPEAHEAD\", key: event2.key });\n              } else {\n                keyMap.Enter?.(event2);\n              }\n            },\n            Escape(event2) {\n              if (prop(\"deselectable\") && value.length > 0) {\n                event2.preventDefault();\n                event2.stopPropagation();\n                send({ type: \"VALUE.CLEAR\" });\n              }\n            }\n          };\n          const exec = keyMap[getEventKey(event)];\n          if (exec) {\n            exec(event);\n            return;\n          }\n          const target = getEventTarget(event);\n          if (isEditableElement(target)) {\n            return;\n          }\n          if (getByTypeahead.isValidEvent(event) && prop(\"typeahead\")) {\n            send({ type: \"CONTENT.TYPEAHEAD\", key: event.key });\n            event.preventDefault();\n          }\n        }\n      });\n    }\n  };\n}\nvar { guards, createMachine } = setup();\nvar { or } = guards;\nvar machine = createMachine({\n  props({ props: props2 }) {\n    return {\n      loopFocus: false,\n      composite: true,\n      defaultValue: [],\n      multiple: false,\n      typeahead: true,\n      collection: collection.empty(),\n      orientation: \"vertical\",\n      selectionMode: \"single\",\n      ...props2\n    };\n  },\n  context({ prop, bindable }) {\n    return {\n      value: bindable(() => ({\n        defaultValue: prop(\"defaultValue\"),\n        value: prop(\"value\"),\n        isEqual,\n        onChange(value) {\n          const items = prop(\"collection\").findMany(value);\n          return prop(\"onValueChange\")?.({ value, items });\n        }\n      })),\n      highlightedValue: bindable(() => ({\n        defaultValue: prop(\"defaultHighlightedValue\") || null,\n        value: prop(\"highlightedValue\"),\n        sync: true,\n        onChange(value) {\n          prop(\"onHighlightChange\")?.({\n            highlightedValue: value,\n            highlightedItem: prop(\"collection\").find(value),\n            highlightedIndex: prop(\"collection\").indexOf(value)\n          });\n        }\n      })),\n      highlightedItem: bindable(() => ({\n        defaultValue: null\n      })),\n      selectedItems: bindable(() => {\n        const value = prop(\"value\") ?? prop(\"defaultValue\") ?? [];\n        const items = prop(\"collection\").findMany(value);\n        return { defaultValue: items };\n      }),\n      focused: bindable(() => ({\n        sync: true,\n        defaultValue: false\n      }))\n    };\n  },\n  refs() {\n    return {\n      typeahead: { ...getByTypeahead.defaultOptions },\n      focusVisible: false\n    };\n  },\n  computed: {\n    hasSelectedItems: ({ context }) => context.get(\"value\").length > 0,\n    isTypingAhead: ({ refs }) => refs.get(\"typeahead\").keysSoFar !== \"\",\n    isInteractive: ({ prop }) => !prop(\"disabled\"),\n    selection: ({ context, prop }) => {\n      const selection = new Selection(context.get(\"value\"));\n      selection.selectionMode = prop(\"selectionMode\");\n      selection.deselectable = !!prop(\"deselectable\");\n      return selection;\n    },\n    multiple: ({ prop }) => prop(\"selectionMode\") === \"multiple\" || prop(\"selectionMode\") === \"extended\",\n    valueAsString: ({ context, prop }) => prop(\"collection\").stringifyItems(context.get(\"selectedItems\"))\n  },\n  initialState() {\n    return \"idle\";\n  },\n  watch({ context, prop, track, action }) {\n    track([() => context.get(\"value\").toString()], () => {\n      action([\"syncSelectedItems\"]);\n    });\n    track([() => context.get(\"highlightedValue\")], () => {\n      action([\"syncHighlightedItem\"]);\n    });\n    track([() => prop(\"collection\").toString()], () => {\n      action([\"syncHighlightedValue\"]);\n    });\n  },\n  effects: [\"trackFocusVisible\"],\n  on: {\n    \"HIGHLIGHTED_VALUE.SET\": {\n      actions: [\"setHighlightedItem\"]\n    },\n    \"ITEM.SELECT\": {\n      actions: [\"selectItem\"]\n    },\n    \"ITEM.CLEAR\": {\n      actions: [\"clearItem\"]\n    },\n    \"VALUE.SET\": {\n      actions: [\"setSelectedItems\"]\n    },\n    \"VALUE.CLEAR\": {\n      actions: [\"clearSelectedItems\"]\n    }\n  },\n  states: {\n    idle: {\n      effects: [\"scrollToHighlightedItem\"],\n      on: {\n        \"INPUT.FOCUS\": {\n          actions: [\"setFocused\"]\n        },\n        \"CONTENT.FOCUS\": [\n          {\n            guard: or(\"hasSelectedValue\", \"hasHighlightedValue\"),\n            actions: [\"setFocused\"]\n          },\n          {\n            actions: [\"setFocused\", \"setDefaultHighlightedValue\"]\n          }\n        ],\n        \"CONTENT.BLUR\": {\n          actions: [\"clearFocused\"]\n        },\n        \"ITEM.CLICK\": {\n          actions: [\"setHighlightedItem\", \"selectHighlightedItem\"]\n        },\n        \"CONTENT.TYPEAHEAD\": {\n          actions: [\"setFocused\", \"highlightMatchingItem\"]\n        },\n        \"ITEM.POINTER_MOVE\": {\n          actions: [\"highlightItem\"]\n        },\n        \"ITEM.POINTER_LEAVE\": {\n          actions: [\"clearHighlightedItem\"]\n        },\n        NAVIGATE: {\n          actions: [\"setFocused\", \"setHighlightedItem\", \"selectWithKeyboard\"]\n        }\n      }\n    }\n  },\n  implementations: {\n    guards: {\n      hasSelectedValue: ({ context }) => context.get(\"value\").length > 0,\n      hasHighlightedValue: ({ context }) => context.get(\"highlightedValue\") != null\n    },\n    effects: {\n      trackFocusVisible: ({ scope, refs }) => {\n        return trackFocusVisible({\n          root: scope.getRootNode?.(),\n          onChange(details) {\n            refs.set(\"focusVisible\", details.isFocusVisible);\n          }\n        });\n      },\n      scrollToHighlightedItem({ context, prop, scope }) {\n        const exec = (immediate) => {\n          const highlightedValue = context.get(\"highlightedValue\");\n          if (highlightedValue == null) return;\n          const modality = getInteractionModality();\n          if (modality !== \"keyboard\") return;\n          const contentEl2 = getContentEl(scope);\n          const scrollToIndexFn = prop(\"scrollToIndexFn\");\n          if (scrollToIndexFn) {\n            const highlightedIndex = prop(\"collection\").indexOf(highlightedValue);\n            scrollToIndexFn?.({\n              index: highlightedIndex,\n              immediate,\n              getElement() {\n                return getItemEl(scope, highlightedValue);\n              }\n            });\n            return;\n          }\n          const itemEl = getItemEl(scope, highlightedValue);\n          scrollIntoView(itemEl, { rootEl: contentEl2, block: \"nearest\" });\n        };\n        raf(() => exec(true));\n        const contentEl = () => getContentEl(scope);\n        return observeAttributes(contentEl, {\n          defer: true,\n          attributes: [\"data-activedescendant\"],\n          callback() {\n            exec(false);\n          }\n        });\n      }\n    },\n    actions: {\n      selectHighlightedItem({ context, prop, event, computed }) {\n        const value = event.value ?? context.get(\"highlightedValue\");\n        const collection2 = prop(\"collection\");\n        if (value == null || !collection2.has(value)) return;\n        const selection = computed(\"selection\");\n        if (event.shiftKey && computed(\"multiple\") && event.anchorValue) {\n          const next = selection.extendSelection(collection2, event.anchorValue, value);\n          invokeOnSelect(selection, next, prop(\"onSelect\"));\n          context.set(\"value\", Array.from(next));\n        } else {\n          const next = selection.select(collection2, value, event.metaKey);\n          invokeOnSelect(selection, next, prop(\"onSelect\"));\n          context.set(\"value\", Array.from(next));\n        }\n      },\n      selectWithKeyboard({ context, prop, event, computed }) {\n        const selection = computed(\"selection\");\n        const collection2 = prop(\"collection\");\n        if (event.shiftKey && computed(\"multiple\") && event.anchorValue) {\n          const next = selection.extendSelection(collection2, event.anchorValue, event.value);\n          invokeOnSelect(selection, next, prop(\"onSelect\"));\n          context.set(\"value\", Array.from(next));\n          return;\n        }\n        if (prop(\"selectOnHighlight\")) {\n          const next = selection.replaceSelection(collection2, event.value);\n          invokeOnSelect(selection, next, prop(\"onSelect\"));\n          context.set(\"value\", Array.from(next));\n        }\n      },\n      highlightItem({ context, event }) {\n        context.set(\"highlightedValue\", event.value);\n      },\n      highlightMatchingItem({ context, prop, event, refs }) {\n        const value = prop(\"collection\").search(event.key, {\n          state: refs.get(\"typeahead\"),\n          currentValue: context.get(\"highlightedValue\")\n        });\n        if (value == null) return;\n        context.set(\"highlightedValue\", value);\n      },\n      setHighlightedItem({ context, event }) {\n        context.set(\"highlightedValue\", event.value);\n      },\n      clearHighlightedItem({ context }) {\n        context.set(\"highlightedValue\", null);\n      },\n      selectItem({ context, prop, event, computed }) {\n        const collection2 = prop(\"collection\");\n        const selection = computed(\"selection\");\n        const next = selection.select(collection2, event.value);\n        invokeOnSelect(selection, next, prop(\"onSelect\"));\n        context.set(\"value\", Array.from(next));\n      },\n      clearItem({ context, event, computed }) {\n        const selection = computed(\"selection\");\n        const value = selection.deselect(event.value);\n        context.set(\"value\", Array.from(value));\n      },\n      setSelectedItems({ context, event }) {\n        context.set(\"value\", event.value);\n      },\n      clearSelectedItems({ context }) {\n        context.set(\"value\", []);\n      },\n      syncSelectedItems({ context, prop }) {\n        const collection2 = prop(\"collection\");\n        const prevSelectedItems = context.get(\"selectedItems\");\n        const value = context.get(\"value\");\n        const selectedItems = value.map((value2) => {\n          const item = prevSelectedItems.find((item2) => collection2.getItemValue(item2) === value2);\n          return item || collection2.find(value2);\n        });\n        context.set(\"selectedItems\", selectedItems);\n      },\n      syncHighlightedItem({ context, prop }) {\n        const collection2 = prop(\"collection\");\n        const highlightedValue = context.get(\"highlightedValue\");\n        const highlightedItem = highlightedValue ? collection2.find(highlightedValue) : null;\n        context.set(\"highlightedItem\", highlightedItem);\n      },\n      syncHighlightedValue({ context, prop }) {\n        const collection2 = prop(\"collection\");\n        const highlightedValue = context.get(\"highlightedValue\");\n        if (highlightedValue != null && !collection2.has(highlightedValue)) {\n          context.set(\"highlightedValue\", null);\n        }\n      },\n      setFocused({ context }) {\n        context.set(\"focused\", true);\n      },\n      setDefaultHighlightedValue({ context, prop }) {\n        const collection2 = prop(\"collection\");\n        const firstValue = collection2.firstValue;\n        if (firstValue != null) {\n          context.set(\"highlightedValue\", firstValue);\n        }\n      },\n      clearFocused({ context }) {\n        context.set(\"focused\", false);\n      }\n    }\n  }\n});\nvar diff = (a, b) => {\n  const result = new Set(a);\n  for (const item of b) result.delete(item);\n  return result;\n};\nfunction invokeOnSelect(current, next, onSelect) {\n  const added = diff(next, current);\n  for (const item of added) {\n    onSelect?.({ value: item });\n  }\n}\nvar props = createProps()([\n  \"collection\",\n  \"defaultHighlightedValue\",\n  \"defaultValue\",\n  \"dir\",\n  \"disabled\",\n  \"deselectable\",\n  \"disallowSelectAll\",\n  \"getRootNode\",\n  \"highlightedValue\",\n  \"id\",\n  \"ids\",\n  \"loopFocus\",\n  \"onHighlightChange\",\n  \"onSelect\",\n  \"onValueChange\",\n  \"orientation\",\n  \"scrollToIndexFn\",\n  \"selectionMode\",\n  \"selectOnHighlight\",\n  \"typeahead\",\n  \"value\"\n]);\nvar splitProps = createSplitProps(props);\nvar itemProps = createProps()([\"item\", \"highlightOnHover\"]);\nvar splitItemProps = createSplitProps(itemProps);\nvar itemGroupProps = createProps()([\"id\"]);\nvar splitItemGroupProps = createSplitProps(itemGroupProps);\nvar itemGroupLabelProps = createProps()([\"htmlFor\"]);\nvar splitItemGroupLabelProps = createSplitProps(itemGroupLabelProps);\n\nexport { anatomy, collection, connect, gridCollection, itemGroupLabelProps, itemGroupProps, itemProps, machine, props, splitItemGroupLabelProps, splitItemGroupProps, splitItemProps, splitProps };\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}