{"ast":null,"code":"import { setStyle, nextTick, raf, getComputedStyle, getEventTarget } from '@zag-js/dom-query';\nimport { createMachine } from '@zag-js/core';\nimport { createProps } from '@zag-js/types';\n\n// src/presence.connect.ts\nfunction connect(service, _normalize) {\n  const {\n    state,\n    send,\n    context\n  } = service;\n  const present = state.matches(\"mounted\", \"unmountSuspended\");\n  return {\n    skip: !context.get(\"initial\"),\n    present,\n    setNode(node) {\n      if (!node) return;\n      send({\n        type: \"NODE.SET\",\n        node\n      });\n    },\n    unmount() {\n      send({\n        type: \"UNMOUNT\"\n      });\n    }\n  };\n}\nvar machine = createMachine({\n  props({\n    props: props2\n  }) {\n    return {\n      ...props2,\n      present: !!props2.present\n    };\n  },\n  initialState({\n    prop\n  }) {\n    return prop(\"present\") ? \"mounted\" : \"unmounted\";\n  },\n  refs() {\n    return {\n      node: null,\n      styles: null\n    };\n  },\n  context({\n    bindable\n  }) {\n    return {\n      unmountAnimationName: bindable(() => ({\n        defaultValue: null\n      })),\n      prevAnimationName: bindable(() => ({\n        defaultValue: null\n      })),\n      present: bindable(() => ({\n        defaultValue: false\n      })),\n      initial: bindable(() => ({\n        sync: true,\n        defaultValue: false\n      }))\n    };\n  },\n  exit: [\"clearInitial\", \"cleanupNode\"],\n  watch({\n    track,\n    prop,\n    send\n  }) {\n    track([() => prop(\"present\")], () => {\n      send({\n        type: \"PRESENCE.CHANGED\"\n      });\n    });\n  },\n  on: {\n    \"NODE.SET\": {\n      actions: [\"setupNode\"]\n    },\n    \"PRESENCE.CHANGED\": {\n      actions: [\"setInitial\", \"syncPresence\"]\n    }\n  },\n  states: {\n    mounted: {\n      on: {\n        UNMOUNT: {\n          target: \"unmounted\",\n          actions: [\"clearPrevAnimationName\", \"invokeOnExitComplete\"]\n        },\n        \"UNMOUNT.SUSPEND\": {\n          target: \"unmountSuspended\"\n        }\n      }\n    },\n    unmountSuspended: {\n      effects: [\"trackAnimationEvents\"],\n      on: {\n        MOUNT: {\n          target: \"mounted\",\n          actions: [\"setPrevAnimationName\"]\n        },\n        UNMOUNT: {\n          target: \"unmounted\",\n          actions: [\"clearPrevAnimationName\", \"invokeOnExitComplete\"]\n        }\n      }\n    },\n    unmounted: {\n      on: {\n        MOUNT: {\n          target: \"mounted\",\n          actions: [\"setPrevAnimationName\"]\n        }\n      }\n    }\n  },\n  implementations: {\n    actions: {\n      setInitial: ({\n        context\n      }) => {\n        if (context.get(\"initial\")) return;\n        queueMicrotask(() => {\n          context.set(\"initial\", true);\n        });\n      },\n      clearInitial: ({\n        context\n      }) => {\n        context.set(\"initial\", false);\n      },\n      invokeOnExitComplete: ({\n        prop\n      }) => {\n        prop(\"onExitComplete\")?.();\n      },\n      setupNode: ({\n        refs,\n        event\n      }) => {\n        if (refs.get(\"node\") === event.node) return;\n        refs.set(\"node\", event.node);\n        refs.set(\"styles\", getComputedStyle(event.node));\n      },\n      cleanupNode: ({\n        refs\n      }) => {\n        refs.set(\"node\", null);\n        refs.set(\"styles\", null);\n      },\n      syncPresence: ({\n        context,\n        refs,\n        send,\n        prop\n      }) => {\n        const presentProp = prop(\"present\");\n        if (presentProp) {\n          return send({\n            type: \"MOUNT\",\n            src: \"presence.changed\"\n          });\n        }\n        const node = refs.get(\"node\");\n        if (!presentProp && node?.ownerDocument.visibilityState === \"hidden\") {\n          return send({\n            type: \"UNMOUNT\",\n            src: \"visibilitychange\"\n          });\n        }\n        raf(() => {\n          const animationName = getAnimationName(refs.get(\"styles\"));\n          context.set(\"unmountAnimationName\", animationName);\n          if (animationName === \"none\" || animationName === context.get(\"prevAnimationName\") || refs.get(\"styles\")?.display === \"none\" || refs.get(\"styles\")?.animationDuration === \"0s\") {\n            send({\n              type: \"UNMOUNT\",\n              src: \"presence.changed\"\n            });\n          } else {\n            send({\n              type: \"UNMOUNT.SUSPEND\"\n            });\n          }\n        });\n      },\n      setPrevAnimationName: ({\n        context,\n        refs\n      }) => {\n        raf(() => {\n          context.set(\"prevAnimationName\", getAnimationName(refs.get(\"styles\")));\n        });\n      },\n      clearPrevAnimationName: ({\n        context\n      }) => {\n        context.set(\"prevAnimationName\", null);\n      }\n    },\n    effects: {\n      trackAnimationEvents: ({\n        context,\n        refs,\n        send,\n        prop\n      }) => {\n        const node = refs.get(\"node\");\n        if (!node) return;\n        const onStart = event => {\n          const target = event.composedPath?.()?.[0] ?? event.target;\n          if (target === node) {\n            context.set(\"prevAnimationName\", getAnimationName(refs.get(\"styles\")));\n          }\n        };\n        const onEnd = event => {\n          const animationName = getAnimationName(refs.get(\"styles\"));\n          const target = getEventTarget(event);\n          if (target === node && animationName === context.get(\"unmountAnimationName\") && !prop(\"present\")) {\n            send({\n              type: \"UNMOUNT\",\n              src: \"animationend\"\n            });\n          }\n        };\n        node.addEventListener(\"animationstart\", onStart);\n        node.addEventListener(\"animationcancel\", onEnd);\n        node.addEventListener(\"animationend\", onEnd);\n        const cleanupStyles = setStyle(node, {\n          animationFillMode: \"forwards\"\n        });\n        return () => {\n          node.removeEventListener(\"animationstart\", onStart);\n          node.removeEventListener(\"animationcancel\", onEnd);\n          node.removeEventListener(\"animationend\", onEnd);\n          nextTick(() => cleanupStyles());\n        };\n      }\n    }\n  }\n});\nfunction getAnimationName(styles) {\n  return styles?.animationName || \"none\";\n}\nvar props = createProps()([\"onExitComplete\", \"present\", \"immediate\"]);\nexport { connect, machine, props };","map":{"version":3,"names":["setStyle","nextTick","raf","getComputedStyle","getEventTarget","createMachine","createProps","connect","service","_normalize","state","send","context","present","matches","skip","get","setNode","node","type","unmount","machine","props","props2","initialState","prop","refs","styles","bindable","unmountAnimationName","defaultValue","prevAnimationName","initial","sync","exit","watch","track","on","actions","states","mounted","UNMOUNT","target","unmountSuspended","effects","MOUNT","unmounted","implementations","setInitial","queueMicrotask","set","clearInitial","invokeOnExitComplete","setupNode","event","cleanupNode","syncPresence","presentProp","src","ownerDocument","visibilityState","animationName","getAnimationName","display","animationDuration","setPrevAnimationName","clearPrevAnimationName","trackAnimationEvents","onStart","composedPath","onEnd","addEventListener","cleanupStyles","animationFillMode","removeEventListener"],"sources":["/Users/ameliamagick/personal-finance-tracker/node_modules/@zag-js/presence/dist/index.mjs"],"sourcesContent":["import { setStyle, nextTick, raf, getComputedStyle, getEventTarget } from '@zag-js/dom-query';\nimport { createMachine } from '@zag-js/core';\nimport { createProps } from '@zag-js/types';\n\n// src/presence.connect.ts\nfunction connect(service, _normalize) {\n  const { state, send, context } = service;\n  const present = state.matches(\"mounted\", \"unmountSuspended\");\n  return {\n    skip: !context.get(\"initial\"),\n    present,\n    setNode(node) {\n      if (!node) return;\n      send({ type: \"NODE.SET\", node });\n    },\n    unmount() {\n      send({ type: \"UNMOUNT\" });\n    }\n  };\n}\nvar machine = createMachine({\n  props({ props: props2 }) {\n    return { ...props2, present: !!props2.present };\n  },\n  initialState({ prop }) {\n    return prop(\"present\") ? \"mounted\" : \"unmounted\";\n  },\n  refs() {\n    return {\n      node: null,\n      styles: null\n    };\n  },\n  context({ bindable }) {\n    return {\n      unmountAnimationName: bindable(() => ({ defaultValue: null })),\n      prevAnimationName: bindable(() => ({ defaultValue: null })),\n      present: bindable(() => ({ defaultValue: false })),\n      initial: bindable(() => ({\n        sync: true,\n        defaultValue: false\n      }))\n    };\n  },\n  exit: [\"clearInitial\", \"cleanupNode\"],\n  watch({ track, prop, send }) {\n    track([() => prop(\"present\")], () => {\n      send({ type: \"PRESENCE.CHANGED\" });\n    });\n  },\n  on: {\n    \"NODE.SET\": {\n      actions: [\"setupNode\"]\n    },\n    \"PRESENCE.CHANGED\": {\n      actions: [\"setInitial\", \"syncPresence\"]\n    }\n  },\n  states: {\n    mounted: {\n      on: {\n        UNMOUNT: {\n          target: \"unmounted\",\n          actions: [\"clearPrevAnimationName\", \"invokeOnExitComplete\"]\n        },\n        \"UNMOUNT.SUSPEND\": {\n          target: \"unmountSuspended\"\n        }\n      }\n    },\n    unmountSuspended: {\n      effects: [\"trackAnimationEvents\"],\n      on: {\n        MOUNT: {\n          target: \"mounted\",\n          actions: [\"setPrevAnimationName\"]\n        },\n        UNMOUNT: {\n          target: \"unmounted\",\n          actions: [\"clearPrevAnimationName\", \"invokeOnExitComplete\"]\n        }\n      }\n    },\n    unmounted: {\n      on: {\n        MOUNT: {\n          target: \"mounted\",\n          actions: [\"setPrevAnimationName\"]\n        }\n      }\n    }\n  },\n  implementations: {\n    actions: {\n      setInitial: ({ context }) => {\n        if (context.get(\"initial\")) return;\n        queueMicrotask(() => {\n          context.set(\"initial\", true);\n        });\n      },\n      clearInitial: ({ context }) => {\n        context.set(\"initial\", false);\n      },\n      invokeOnExitComplete: ({ prop }) => {\n        prop(\"onExitComplete\")?.();\n      },\n      setupNode: ({ refs, event }) => {\n        if (refs.get(\"node\") === event.node) return;\n        refs.set(\"node\", event.node);\n        refs.set(\"styles\", getComputedStyle(event.node));\n      },\n      cleanupNode: ({ refs }) => {\n        refs.set(\"node\", null);\n        refs.set(\"styles\", null);\n      },\n      syncPresence: ({ context, refs, send, prop }) => {\n        const presentProp = prop(\"present\");\n        if (presentProp) {\n          return send({ type: \"MOUNT\", src: \"presence.changed\" });\n        }\n        const node = refs.get(\"node\");\n        if (!presentProp && node?.ownerDocument.visibilityState === \"hidden\") {\n          return send({ type: \"UNMOUNT\", src: \"visibilitychange\" });\n        }\n        raf(() => {\n          const animationName = getAnimationName(refs.get(\"styles\"));\n          context.set(\"unmountAnimationName\", animationName);\n          if (animationName === \"none\" || animationName === context.get(\"prevAnimationName\") || refs.get(\"styles\")?.display === \"none\" || refs.get(\"styles\")?.animationDuration === \"0s\") {\n            send({ type: \"UNMOUNT\", src: \"presence.changed\" });\n          } else {\n            send({ type: \"UNMOUNT.SUSPEND\" });\n          }\n        });\n      },\n      setPrevAnimationName: ({ context, refs }) => {\n        raf(() => {\n          context.set(\"prevAnimationName\", getAnimationName(refs.get(\"styles\")));\n        });\n      },\n      clearPrevAnimationName: ({ context }) => {\n        context.set(\"prevAnimationName\", null);\n      }\n    },\n    effects: {\n      trackAnimationEvents: ({ context, refs, send, prop }) => {\n        const node = refs.get(\"node\");\n        if (!node) return;\n        const onStart = (event) => {\n          const target = event.composedPath?.()?.[0] ?? event.target;\n          if (target === node) {\n            context.set(\"prevAnimationName\", getAnimationName(refs.get(\"styles\")));\n          }\n        };\n        const onEnd = (event) => {\n          const animationName = getAnimationName(refs.get(\"styles\"));\n          const target = getEventTarget(event);\n          if (target === node && animationName === context.get(\"unmountAnimationName\") && !prop(\"present\")) {\n            send({ type: \"UNMOUNT\", src: \"animationend\" });\n          }\n        };\n        node.addEventListener(\"animationstart\", onStart);\n        node.addEventListener(\"animationcancel\", onEnd);\n        node.addEventListener(\"animationend\", onEnd);\n        const cleanupStyles = setStyle(node, { animationFillMode: \"forwards\" });\n        return () => {\n          node.removeEventListener(\"animationstart\", onStart);\n          node.removeEventListener(\"animationcancel\", onEnd);\n          node.removeEventListener(\"animationend\", onEnd);\n          nextTick(() => cleanupStyles());\n        };\n      }\n    }\n  }\n});\nfunction getAnimationName(styles) {\n  return styles?.animationName || \"none\";\n}\nvar props = createProps()([\"onExitComplete\", \"present\", \"immediate\"]);\n\nexport { connect, machine, props };\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}