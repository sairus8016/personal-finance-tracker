{"ast":null,"code":"import { isHTMLElement, findControlledElements } from '@zag-js/dom-query';\n\n// src/walk-tree-outside.ts\nvar counterMap = /* @__PURE__ */new WeakMap();\nvar uncontrolledNodes = /* @__PURE__ */new WeakMap();\nvar markerMap = {};\nvar lockCount = 0;\nvar unwrapHost = node => node && (node.host || unwrapHost(node.parentNode));\nvar correctTargets = (parent, targets) => targets.map(target => {\n  if (parent.contains(target)) return target;\n  const correctedTarget = unwrapHost(target);\n  if (correctedTarget && parent.contains(correctedTarget)) {\n    return correctedTarget;\n  }\n  console.error(\"[zag-js > ariaHidden] target\", target, \"in not contained inside\", parent, \". Doing nothing\");\n  return null;\n}).filter(x => Boolean(x));\nvar ignoreableNodes = /* @__PURE__ */new Set([\"script\", \"output\", \"status\", \"next-route-announcer\"]);\nvar isIgnoredNode = node => {\n  if (ignoreableNodes.has(node.localName)) return true;\n  if (node.role === \"status\") return true;\n  if (node.hasAttribute(\"aria-live\")) return true;\n  return node.matches(\"[data-live-announcer]\");\n};\nvar walkTreeOutside = (originalTarget, props) => {\n  const {\n    parentNode,\n    markerName,\n    controlAttribute,\n    followControlledElements = true\n  } = props;\n  const targets = correctTargets(parentNode, Array.isArray(originalTarget) ? originalTarget : [originalTarget]);\n  markerMap[markerName] || (markerMap[markerName] = /* @__PURE__ */new WeakMap());\n  const markerCounter = markerMap[markerName];\n  const hiddenNodes = [];\n  const elementsToKeep = /* @__PURE__ */new Set();\n  const elementsToStop = new Set(targets);\n  const keep = el => {\n    if (!el || elementsToKeep.has(el)) return;\n    elementsToKeep.add(el);\n    keep(el.parentNode);\n  };\n  targets.forEach(target => {\n    keep(target);\n    if (followControlledElements && isHTMLElement(target)) {\n      findControlledElements(target, controlledElement => {\n        keep(controlledElement);\n      });\n    }\n  });\n  const deep = parent => {\n    if (!parent || elementsToStop.has(parent)) {\n      return;\n    }\n    Array.prototype.forEach.call(parent.children, node => {\n      if (elementsToKeep.has(node)) {\n        deep(node);\n      } else {\n        try {\n          if (isIgnoredNode(node)) return;\n          const attr = node.getAttribute(controlAttribute);\n          const alreadyHidden = attr === \"true\";\n          const counterValue = (counterMap.get(node) || 0) + 1;\n          const markerValue = (markerCounter.get(node) || 0) + 1;\n          counterMap.set(node, counterValue);\n          markerCounter.set(node, markerValue);\n          hiddenNodes.push(node);\n          if (counterValue === 1 && alreadyHidden) {\n            uncontrolledNodes.set(node, true);\n          }\n          if (markerValue === 1) {\n            node.setAttribute(markerName, \"\");\n          }\n          if (!alreadyHidden) {\n            node.setAttribute(controlAttribute, \"true\");\n          }\n        } catch (e) {\n          console.error(\"[zag-js > ariaHidden] cannot operate on \", node, e);\n        }\n      }\n    });\n  };\n  deep(parentNode);\n  elementsToKeep.clear();\n  lockCount++;\n  return () => {\n    hiddenNodes.forEach(node => {\n      const counterValue = counterMap.get(node) - 1;\n      const markerValue = markerCounter.get(node) - 1;\n      counterMap.set(node, counterValue);\n      markerCounter.set(node, markerValue);\n      if (!counterValue) {\n        if (!uncontrolledNodes.has(node)) {\n          node.removeAttribute(controlAttribute);\n        }\n        uncontrolledNodes.delete(node);\n      }\n      if (!markerValue) {\n        node.removeAttribute(markerName);\n      }\n    });\n    lockCount--;\n    if (!lockCount) {\n      counterMap = /* @__PURE__ */new WeakMap();\n      counterMap = /* @__PURE__ */new WeakMap();\n      uncontrolledNodes = /* @__PURE__ */new WeakMap();\n      markerMap = {};\n    }\n  };\n};\n\n// src/aria-hidden.ts\nvar getParentNode = originalTarget => {\n  const target = Array.isArray(originalTarget) ? originalTarget[0] : originalTarget;\n  return target.ownerDocument.body;\n};\nvar hideOthers = (originalTarget, parentNode = getParentNode(originalTarget), markerName = \"data-aria-hidden\", followControlledElements = true) => {\n  if (!parentNode) return;\n  return walkTreeOutside(originalTarget, {\n    parentNode,\n    markerName,\n    controlAttribute: \"aria-hidden\",\n    followControlledElements\n  });\n};\n\n// src/index.ts\nvar raf = fn => {\n  const frameId = requestAnimationFrame(() => fn());\n  return () => cancelAnimationFrame(frameId);\n};\nfunction ariaHidden(targetsOrFn, options = {}) {\n  const {\n    defer = true\n  } = options;\n  const func = defer ? raf : v => v();\n  const cleanups = [];\n  cleanups.push(func(() => {\n    const targets = typeof targetsOrFn === \"function\" ? targetsOrFn() : targetsOrFn;\n    const elements = targets.filter(Boolean);\n    if (elements.length === 0) return;\n    cleanups.push(hideOthers(elements));\n  }));\n  return () => {\n    cleanups.forEach(fn => fn?.());\n  };\n}\nexport { ariaHidden };","map":{"version":3,"names":["isHTMLElement","findControlledElements","counterMap","WeakMap","uncontrolledNodes","markerMap","lockCount","unwrapHost","node","host","parentNode","correctTargets","parent","targets","map","target","contains","correctedTarget","console","error","filter","x","Boolean","ignoreableNodes","Set","isIgnoredNode","has","localName","role","hasAttribute","matches","walkTreeOutside","originalTarget","props","markerName","controlAttribute","followControlledElements","Array","isArray","markerCounter","hiddenNodes","elementsToKeep","elementsToStop","keep","el","add","forEach","controlledElement","deep","prototype","call","children","attr","getAttribute","alreadyHidden","counterValue","get","markerValue","set","push","setAttribute","e","clear","removeAttribute","delete","getParentNode","ownerDocument","body","hideOthers","raf","fn","frameId","requestAnimationFrame","cancelAnimationFrame","ariaHidden","targetsOrFn","options","defer","func","v","cleanups","elements","length"],"sources":["/Users/ameliamagick/personal-finance-tracker/node_modules/@zag-js/aria-hidden/dist/index.mjs"],"sourcesContent":["import { isHTMLElement, findControlledElements } from '@zag-js/dom-query';\n\n// src/walk-tree-outside.ts\nvar counterMap = /* @__PURE__ */ new WeakMap();\nvar uncontrolledNodes = /* @__PURE__ */ new WeakMap();\nvar markerMap = {};\nvar lockCount = 0;\nvar unwrapHost = (node) => node && (node.host || unwrapHost(node.parentNode));\nvar correctTargets = (parent, targets) => targets.map((target) => {\n  if (parent.contains(target)) return target;\n  const correctedTarget = unwrapHost(target);\n  if (correctedTarget && parent.contains(correctedTarget)) {\n    return correctedTarget;\n  }\n  console.error(\"[zag-js > ariaHidden] target\", target, \"in not contained inside\", parent, \". Doing nothing\");\n  return null;\n}).filter((x) => Boolean(x));\nvar ignoreableNodes = /* @__PURE__ */ new Set([\"script\", \"output\", \"status\", \"next-route-announcer\"]);\nvar isIgnoredNode = (node) => {\n  if (ignoreableNodes.has(node.localName)) return true;\n  if (node.role === \"status\") return true;\n  if (node.hasAttribute(\"aria-live\")) return true;\n  return node.matches(\"[data-live-announcer]\");\n};\nvar walkTreeOutside = (originalTarget, props) => {\n  const { parentNode, markerName, controlAttribute, followControlledElements = true } = props;\n  const targets = correctTargets(parentNode, Array.isArray(originalTarget) ? originalTarget : [originalTarget]);\n  markerMap[markerName] || (markerMap[markerName] = /* @__PURE__ */ new WeakMap());\n  const markerCounter = markerMap[markerName];\n  const hiddenNodes = [];\n  const elementsToKeep = /* @__PURE__ */ new Set();\n  const elementsToStop = new Set(targets);\n  const keep = (el) => {\n    if (!el || elementsToKeep.has(el)) return;\n    elementsToKeep.add(el);\n    keep(el.parentNode);\n  };\n  targets.forEach((target) => {\n    keep(target);\n    if (followControlledElements && isHTMLElement(target)) {\n      findControlledElements(target, (controlledElement) => {\n        keep(controlledElement);\n      });\n    }\n  });\n  const deep = (parent) => {\n    if (!parent || elementsToStop.has(parent)) {\n      return;\n    }\n    Array.prototype.forEach.call(parent.children, (node) => {\n      if (elementsToKeep.has(node)) {\n        deep(node);\n      } else {\n        try {\n          if (isIgnoredNode(node)) return;\n          const attr = node.getAttribute(controlAttribute);\n          const alreadyHidden = attr === \"true\" ;\n          const counterValue = (counterMap.get(node) || 0) + 1;\n          const markerValue = (markerCounter.get(node) || 0) + 1;\n          counterMap.set(node, counterValue);\n          markerCounter.set(node, markerValue);\n          hiddenNodes.push(node);\n          if (counterValue === 1 && alreadyHidden) {\n            uncontrolledNodes.set(node, true);\n          }\n          if (markerValue === 1) {\n            node.setAttribute(markerName, \"\");\n          }\n          if (!alreadyHidden) {\n            node.setAttribute(controlAttribute, \"true\" );\n          }\n        } catch (e) {\n          console.error(\"[zag-js > ariaHidden] cannot operate on \", node, e);\n        }\n      }\n    });\n  };\n  deep(parentNode);\n  elementsToKeep.clear();\n  lockCount++;\n  return () => {\n    hiddenNodes.forEach((node) => {\n      const counterValue = counterMap.get(node) - 1;\n      const markerValue = markerCounter.get(node) - 1;\n      counterMap.set(node, counterValue);\n      markerCounter.set(node, markerValue);\n      if (!counterValue) {\n        if (!uncontrolledNodes.has(node)) {\n          node.removeAttribute(controlAttribute);\n        }\n        uncontrolledNodes.delete(node);\n      }\n      if (!markerValue) {\n        node.removeAttribute(markerName);\n      }\n    });\n    lockCount--;\n    if (!lockCount) {\n      counterMap = /* @__PURE__ */ new WeakMap();\n      counterMap = /* @__PURE__ */ new WeakMap();\n      uncontrolledNodes = /* @__PURE__ */ new WeakMap();\n      markerMap = {};\n    }\n  };\n};\n\n// src/aria-hidden.ts\nvar getParentNode = (originalTarget) => {\n  const target = Array.isArray(originalTarget) ? originalTarget[0] : originalTarget;\n  return target.ownerDocument.body;\n};\nvar hideOthers = (originalTarget, parentNode = getParentNode(originalTarget), markerName = \"data-aria-hidden\", followControlledElements = true) => {\n  if (!parentNode) return;\n  return walkTreeOutside(originalTarget, {\n    parentNode,\n    markerName,\n    controlAttribute: \"aria-hidden\",\n    followControlledElements\n  });\n};\n\n// src/index.ts\nvar raf = (fn) => {\n  const frameId = requestAnimationFrame(() => fn());\n  return () => cancelAnimationFrame(frameId);\n};\nfunction ariaHidden(targetsOrFn, options = {}) {\n  const { defer = true } = options;\n  const func = defer ? raf : (v) => v();\n  const cleanups = [];\n  cleanups.push(\n    func(() => {\n      const targets = typeof targetsOrFn === \"function\" ? targetsOrFn() : targetsOrFn;\n      const elements = targets.filter(Boolean);\n      if (elements.length === 0) return;\n      cleanups.push(hideOthers(elements));\n    })\n  );\n  return () => {\n    cleanups.forEach((fn) => fn?.());\n  };\n}\n\nexport { ariaHidden };\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}